<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma Tribu | AlerteRabais.com</title>
    <meta name="description" content="G√©rez vos proches, leurs pr√©f√©rences et ne manquez plus jamais une occasion importante.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0A1628;
            --bg-card: #0D1E30;
            --bg-input: #12263A;
            --bg-hover: #1A3148;
            --accent-cyan: #00D9FF;
            --accent-green: #10B981;
            --accent-yellow: #FBBF24;
            --accent-pink: #EC4899;
            --accent-purple: #A855F7;
            --accent-orange: #F97316;
            --accent-red: #EF4444;
            --accent-blue: #3B82F6;
            --facebook: #1877F2;
            --instagram: #E4405F;
            --twitter: #1DA1F2;
            --linkedin: #0A66C2;
            --tiktok: #000000;
            --text-white: #FFFFFF;
            --text-muted: #94A3B8;
            --text-ghost: #4B5563;
            --border: rgba(255,255,255,0.08);
            --glow-cyan: rgba(0, 217, 255, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0F172A 100%);
            min-height: 100vh;
            color: var(--text-white);
        }

        /* ===== HEADER/NAV ===== */
        .header {
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            background: rgba(10, 22, 40, 0.8);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-white);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-cyan), #0891B2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .logo-text span { color: var(--accent-cyan); }

        .nav-links {
            display: flex;
            gap: 0.5rem;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .nav-link.active {
            background: var(--glow-cyan);
            color: var(--accent-cyan);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-premium {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--accent-cyan), #0891B2);
            border: none;
            border-radius: 8px;
            color: var(--bg-primary);
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--glow-cyan);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .page-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .page-subtitle {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        .btn-add-member {
            padding: 0.75rem 1.25rem;
            background: var(--accent-green);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-add-member:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        /* ===== GROUP TABS ===== */
        .group-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .group-tab {
            padding: 0.6rem 1.25rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 25px;
            color: var(--text-muted);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .group-tab:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .group-tab.active {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            border-color: var(--accent-cyan);
        }

        .group-tab .count {
            background: rgba(255,255,255,0.2);
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .group-tab.active .count {
            background: rgba(0,0,0,0.2);
        }

        /* ===== MEMBERS GRID ===== */
        .members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .member-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            transition: all 0.3s;
        }

        .member-card:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 8px 30px rgba(0, 217, 255, 0.1);
            transform: translateY(-4px);
        }

        .member-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .member-avatar.family { background: linear-gradient(135deg, #EC4899, #F472B6); }
        .member-avatar.friend { background: linear-gradient(135deg, #8B5CF6, #A78BFA); }
        .member-avatar.colleague { background: linear-gradient(135deg, #F59E0B, #FBBF24); }

        .member-info { flex: 1; }

        .member-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .member-relation {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .member-menu {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .member-menu:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .member-details {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: var(--bg-input);
            border-radius: 10px;
        }

        .member-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .member-detail-icon {
            font-size: 1rem;
        }

        .member-interests {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .interest-tag {
            padding: 0.35rem 0.75rem;
            background: var(--bg-hover);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* ===== SOCIAL LINKS ===== */
        .member-socials {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .social-badge {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.65rem;
            border-radius: 8px;
            font-size: 0.75rem;
            text-decoration: none;
            transition: all 0.2s;
        }

        .social-badge.email { background: rgba(16, 185, 129, 0.2); color: var(--accent-green); }
        .social-badge.facebook { background: rgba(24, 119, 242, 0.2); color: var(--facebook); }
        .social-badge.instagram { background: rgba(228, 64, 95, 0.2); color: var(--instagram); }
        .social-badge.twitter { background: rgba(29, 161, 242, 0.2); color: var(--twitter); }
        .social-badge.linkedin { background: rgba(10, 102, 194, 0.2); color: var(--linkedin); }
        .social-badge.tiktok { background: rgba(255, 255, 255, 0.1); color: var(--text-white); }

        .social-badge:hover {
            transform: scale(1.05);
        }

        .member-actions {
            display: flex;
            gap: 0.75rem;
        }

        .member-action-btn {
            flex: 1;
            padding: 0.65rem 1rem;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--bg-input);
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .member-action-btn:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .member-action-btn.primary {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
            color: var(--bg-primary);
        }

        .member-action-btn.primary:hover {
            box-shadow: 0 4px 15px var(--glow-cyan);
        }

        .member-action-btn.invite {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: white;
        }

        /* ===== INVITE STATUS ===== */
        .invite-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }

        .invite-status.pending {
            background: rgba(251, 191, 36, 0.15);
            color: var(--accent-yellow);
        }

        .invite-status.accepted {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .invite-status.not-invited {
            background: rgba(148, 163, 184, 0.1);
            color: var(--text-muted);
        }

        /* ===== ADD MEMBER CARD ===== */
        .add-member-card {
            background: var(--bg-card);
            border: 2px dashed var(--border);
            border-radius: 16px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 280px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .add-member-card:hover {
            border-color: var(--accent-cyan);
            background: rgba(0, 217, 255, 0.05);
        }

        .add-member-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-hover);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .add-member-card:hover .add-member-icon {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            transform: scale(1.1);
        }

        .add-member-text {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .add-member-hint {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* ===== INVITE SECTION ===== */
        .invite-section {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .invite-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .invite-text {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .invite-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .btn-invite {
            padding: 0.65rem 1.25rem;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-invite.secondary {
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-white);
        }

        .btn-invite.primary {
            background: var(--accent-cyan);
            border: none;
            color: var(--bg-primary);
        }

        .btn-invite.facebook {
            background: var(--facebook);
            border: none;
            color: white;
        }

        .btn-invite.twitter {
            background: var(--twitter);
            border: none;
            color: white;
        }

        /* ===== MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            width: 100%;
            max-width: 550px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .form-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .form-section-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-white);
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px var(--glow-cyan);
        }

        .form-input::placeholder {
            color: var(--text-ghost);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-white);
            font-size: 0.95rem;
            cursor: pointer;
        }

        .form-select option {
            background: var(--bg-primary);
        }

        .avatar-selector {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .avatar-option {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
            background: var(--bg-input);
        }

        .avatar-option:hover {
            transform: scale(1.1);
        }

        .avatar-option.selected {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px var(--glow-cyan);
        }

        .interests-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .interest-checkbox {
            display: none;
        }

        .interest-label {
            padding: 0.5rem 0.75rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .interest-label:hover {
            background: var(--bg-hover);
        }

        .interest-checkbox:checked + .interest-label {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            border-color: var(--accent-cyan);
        }

        /* Social input with icon */
        .social-input-group {
            display: flex;
            align-items: center;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.2s;
        }

        .social-input-group:focus-within {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px var(--glow-cyan);
        }

        .social-input-icon {
            padding: 0.75rem;
            font-size: 1.1rem;
            min-width: 45px;
            text-align: center;
        }

        .social-input-icon.email { color: var(--accent-green); }
        .social-input-icon.facebook { color: var(--facebook); }
        .social-input-icon.instagram { color: var(--instagram); }
        .social-input-icon.twitter { color: var(--twitter); }
        .social-input-icon.linkedin { color: var(--linkedin); }
        .social-input-icon.tiktok { color: var(--text-white); }

        .social-input {
            flex: 1;
            padding: 0.75rem 1rem 0.75rem 0;
            background: transparent;
            border: none;
            color: var(--text-white);
            font-size: 0.95rem;
        }

        .social-input:focus {
            outline: none;
        }

        .social-input::placeholder {
            color: var(--text-ghost);
        }

        .invite-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-hover);
            border-radius: 10px;
            margin-top: 1rem;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-input);
            border-radius: 26px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            content: "";
            position: absolute;
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: var(--accent-green);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        .toggle-label {
            flex: 1;
        }

        .toggle-title {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .toggle-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-modal {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-modal.secondary {
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-white);
        }

        .btn-modal.primary {
            background: var(--accent-green);
            border: none;
            color: white;
        }

        .btn-modal.primary:hover {
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-modal.danger {
            background: var(--accent-red);
            border: none;
            color: white;
        }

        /* ===== DROPDOWN MENU ===== */
        .dropdown-menu {
            position: absolute;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.5rem;
            min-width: 180px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            z-index: 50;
            display: none;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            transition: all 0.2s;
        }

        .dropdown-item:hover {
            background: var(--bg-hover);
            color: var(--text-white);
        }

        .dropdown-item.danger:hover {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }

        /* ===== TOAST NOTIFICATION ===== */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--bg-card);
            border: 1px solid var(--accent-green);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 2000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            border-color: var(--accent-red);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header {
                flex-wrap: wrap;
                gap: 1rem;
            }

            .nav-links {
                order: 3;
                width: 100%;
                justify-content: center;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .invite-section {
                flex-direction: column;
                text-align: center;
            }

            .modal {
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="index.html" class="logo">
            <div class="logo-icon">üéÅ</div>
            <div class="logo-text">Alerte<span>Rabais</span>AI</div>
        </a>
        <nav class="nav-links">
            <a href="index.html" class="nav-link">üîç Recherche</a>
            <a href="tribu.html" class="nav-link active">üë• Ma Tribu</a>
            <a href="listes.html" class="nav-link">üìã Listes</a>
        </nav>
        <div class="header-actions">
            <button class="btn-premium">‚≠ê Premium</button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1 class="page-title">üë• Ma Tribu</h1>
                <p class="page-subtitle">G√©rez vos proches et leurs pr√©f√©rences pour ne jamais manquer une occasion</p>
            </div>
            <button class="btn-add-member" onclick="openModal()">
                <span>+</span> Ajouter un membre
            </button>
        </div>

        <!-- Group Tabs -->
        <div class="group-tabs">
            <button class="group-tab active" data-group="all">
                Tous <span class="count" id="count-all">0</span>
            </button>
            <button class="group-tab" data-group="family">
                üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Famille <span class="count" id="count-family">0</span>
            </button>
            <button class="group-tab" data-group="friend">
                üßë‚Äçü§ù‚Äçüßë Amis <span class="count" id="count-friend">0</span>
            </button>
            <button class="group-tab" data-group="colleague">
                üíº Coll√®gues <span class="count" id="count-colleague">0</span>
            </button>
        </div>

        <!-- Members Grid -->
        <div class="members-grid" id="members-grid">
            <!-- Members will be rendered here dynamically -->
            
            <!-- Add Member Card (always last) -->
            <div class="add-member-card" onclick="openModal()">
                <div class="add-member-icon">+</div>
                <div class="add-member-text">Ajouter un membre</div>
                <div class="add-member-hint">Cliquez pour cr√©er un nouveau profil</div>
            </div>
        </div>

        <!-- Invite Section -->
        <div class="invite-section">
            <div class="invite-content">
                <div class="invite-title">üöÄ Faites grandir votre tribu!</div>
                <div class="invite-text">Partagez AlerteRabais sur vos r√©seaux sociaux et invitez vos proches √† rejoindre votre tribu.</div>
            </div>
            <div class="invite-actions">
                <button class="btn-invite secondary" onclick="copyInviteLink()">üìã Copier le lien</button>
                <button class="btn-invite facebook" onclick="shareOnFacebook()">üìò Facebook</button>
                <button class="btn-invite twitter" onclick="shareOnTwitter()">üê¶ Twitter</button>
                <button class="btn-invite primary" onclick="inviteByEmail()">üìß Email</button>
            </div>
        </div>
    </main>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">üë§ Ajouter un membre</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="member-form">
                    <input type="hidden" id="member-id">
                    
                    <!-- Section: Identit√© -->
                    <div class="form-section">
                        <div class="form-section-title">üë§ Identit√©</div>
                        
                        <!-- Avatar -->
                        <div class="form-group">
                            <label class="form-label">Avatar</label>
                            <div class="avatar-selector" id="avatar-selector">
                                <div class="avatar-option selected" data-avatar="üë©">üë©</div>
                                <div class="avatar-option" data-avatar="üë®">üë®</div>
                                <div class="avatar-option" data-avatar="üëß">üëß</div>
                                <div class="avatar-option" data-avatar="üë¶">üë¶</div>
                                <div class="avatar-option" data-avatar="üë¥">üë¥</div>
                                <div class="avatar-option" data-avatar="üëµ">üëµ</div>
                                <div class="avatar-option" data-avatar="üßë">üßë</div>
                                <div class="avatar-option" data-avatar="üë∂">üë∂</div>
                            </div>
                        </div>

                        <!-- Nom -->
                        <div class="form-group">
                            <label class="form-label">Nom / Surnom *</label>
                            <input type="text" class="form-input" id="member-name" placeholder="Ex: Maman, Papa, Sophie..." required>
                        </div>

                        <!-- Relation & Groupe -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Relation</label>
                                <input type="text" class="form-input" id="member-relation" placeholder="Ex: M√®re, Ami proche...">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Groupe *</label>
                                <select class="form-select" id="member-group" required>
                                    <option value="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Famille</option>
                                    <option value="friend">üßë‚Äçü§ù‚Äçüßë Ami</option>
                                    <option value="colleague">üíº Coll√®gue</option>
                                </select>
                            </div>
                        </div>

                        <!-- √Çge & Anniversaire -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">√Çge</label>
                                <input type="number" class="form-input" id="member-age" placeholder="Ex: 35" min="0" max="120">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date d'anniversaire</label>
                                <input type="date" class="form-input" id="member-birthday">
                            </div>
                        </div>
                    </div>

                    <!-- Section: Contact & R√©seaux sociaux -->
                    <div class="form-section">
                        <div class="form-section-title">üì± Contact & R√©seaux sociaux</div>
                        
                        <!-- Email -->
                        <div class="form-group">
                            <label class="form-label">Adresse email</label>
                            <div class="social-input-group">
                                <span class="social-input-icon email">üìß</span>
                                <input type="email" class="social-input" id="member-email" placeholder="exemple@email.com">
                            </div>
                        </div>

                        <!-- Facebook -->
                        <div class="form-group">
                            <label class="form-label">Facebook</label>
                            <div class="social-input-group">
                                <span class="social-input-icon facebook">üìò</span>
                                <input type="text" class="social-input" id="member-facebook" placeholder="facebook.com/nom ou nom d'utilisateur">
                            </div>
                        </div>

                        <!-- Instagram -->
                        <div class="form-group">
                            <label class="form-label">Instagram</label>
                            <div class="social-input-group">
                                <span class="social-input-icon instagram">üì∏</span>
                                <input type="text" class="social-input" id="member-instagram" placeholder="@nomdutilisateur">
                            </div>
                        </div>

                        <!-- Twitter/X -->
                        <div class="form-group">
                            <label class="form-label">Twitter / X</label>
                            <div class="social-input-group">
                                <span class="social-input-icon twitter">üê¶</span>
                                <input type="text" class="social-input" id="member-twitter" placeholder="@nomdutilisateur">
                            </div>
                        </div>

                        <!-- LinkedIn -->
                        <div class="form-group">
                            <label class="form-label">LinkedIn</label>
                            <div class="social-input-group">
                                <span class="social-input-icon linkedin">üíº</span>
                                <input type="text" class="social-input" id="member-linkedin" placeholder="linkedin.com/in/nom">
                            </div>
                        </div>

                        <!-- TikTok -->
                        <div class="form-group">
                            <label class="form-label">TikTok</label>
                            <div class="social-input-group">
                                <span class="social-input-icon tiktok">üéµ</span>
                                <input type="text" class="social-input" id="member-tiktok" placeholder="@nomdutilisateur">
                            </div>
                        </div>

                        <!-- Toggle: Envoyer invitation -->
                        <div class="invite-toggle">
                            <label class="toggle-switch">
                                <input type="checkbox" id="send-invite" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <div class="toggle-label">
                                <div class="toggle-title">üöÄ Envoyer une invitation</div>
                                <div class="toggle-desc">Notifier cette personne qu'elle a √©t√© ajout√©e √† votre tribu</div>
                            </div>
                        </div>
                    </div>

                    <!-- Section: Pr√©f√©rences -->
                    <div class="form-section">
                        <div class="form-section-title">üëï Pr√©f√©rences</div>
                        
                        <!-- Taille & Pointure -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Taille v√™tement</label>
                                <select class="form-select" id="member-size">
                                    <option value="">Non sp√©cifi√©</option>
                                    <option value="XS">XS</option>
                                    <option value="S">S</option>
                                    <option value="M">M</option>
                                    <option value="L">L</option>
                                    <option value="XL">XL</option>
                                    <option value="XXL">XXL</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Pointure</label>
                                <input type="number" class="form-input" id="member-shoe" placeholder="Ex: 42" min="15" max="55">
                            </div>
                        </div>

                        <!-- Int√©r√™ts -->
                        <div class="form-group">
                            <label class="form-label">Centres d'int√©r√™t</label>
                            <div class="interests-container">
                                <input type="checkbox" class="interest-checkbox" id="int-cuisine" value="üç≥ Cuisine">
                                <label for="int-cuisine" class="interest-label">üç≥ Cuisine</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-jardinage" value="üå± Jardinage">
                                <label for="int-jardinage" class="interest-label">üå± Jardinage</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-lecture" value="üìö Lecture">
                                <label for="int-lecture" class="interest-label">üìö Lecture</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-sport" value="‚öΩ Sport">
                                <label for="int-sport" class="interest-label">‚öΩ Sport</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-gaming" value="üéÆ Gaming">
                                <label for="int-gaming" class="interest-label">üéÆ Gaming</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-tech" value="üíª Tech">
                                <label for="int-tech" class="interest-label">üíª Tech</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-yoga" value="üßò Yoga">
                                <label for="int-yoga" class="interest-label">üßò Yoga</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-voyage" value="‚úàÔ∏è Voyage">
                                <label for="int-voyage" class="interest-label">‚úàÔ∏è Voyage</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-musique" value="üéµ Musique">
                                <label for="int-musique" class="interest-label">üéµ Musique</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-art" value="üé® Art">
                                <label for="int-art" class="interest-label">üé® Art</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-bricolage" value="üîß Bricolage">
                                <label for="int-bricolage" class="interest-label">üîß Bricolage</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-cafe" value="‚òï Caf√©">
                                <label for="int-cafe" class="interest-label">‚òï Caf√©</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-mode" value="üëó Mode">
                                <label for="int-mode" class="interest-label">üëó Mode</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-cinema" value="üé¨ Cin√©ma">
                                <label for="int-cinema" class="interest-label">üé¨ Cin√©ma</label>
                                
                                <input type="checkbox" class="interest-checkbox" id="int-nature" value="üå≤ Nature">
                                <label for="int-nature" class="interest-label">üå≤ Nature</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-modal secondary" onclick="closeModal()">Annuler</button>
                <button class="btn-modal danger" id="btn-delete" onclick="deleteMember()" style="display: none;">üóëÔ∏è Supprimer</button>
                <button class="btn-modal primary" onclick="saveMember()">üíæ Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span id="toast-icon">‚úÖ</span>
        <span id="toast-message">Membre ajout√© avec succ√®s!</span>
    </div>

    <script>
        console.log('üë• Ma Tribu - AlerteRabais.com - v3.0 Viral Edition');

        // ===== CONFIGURATION =====
        const CONFIG = {
            BACKEND_URL: 'https://alerterabais-backend.onrender.com',
            SITE_URL: 'https://alerterabais.com',
            SITE_NAME: 'AlerteRabais'
        };

        // ===== DATA STORAGE =====
        const STORAGE_KEY = 'alerterabais_tribu';
        
        // Load members from localStorage
        function loadMembers() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
        }

        // Save members to localStorage
        function saveMembers(members) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(members));
        }

        // ===== RENDER FUNCTIONS =====
        function renderMembers(filterGroup = 'all') {
            const members = loadMembers();
            const grid = document.getElementById('members-grid');
            
            // Keep only the add-member-card
            const addCard = grid.querySelector('.add-member-card');
            grid.innerHTML = '';
            
            // Filter and render members
            const filteredMembers = filterGroup === 'all' 
                ? members 
                : members.filter(m => m.group === filterGroup);
            
            filteredMembers.forEach((member, index) => {
                const card = createMemberCard(member);
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                grid.appendChild(card);
                
                // Animate in
                setTimeout(() => {
                    card.style.transition = 'all 0.4s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 80);
            });
            
            // Add the add-member-card at the end
            grid.appendChild(addCard);
            
            // Update counts
            updateCounts(members);
        }

        function createMemberCard(member) {
            const card = document.createElement('div');
            card.className = 'member-card';
            card.dataset.group = member.group;
            card.dataset.id = member.id;
            
            // Format birthday
            let birthdayDisplay = '';
            if (member.birthday) {
                const date = new Date(member.birthday);
                const options = { day: 'numeric', month: 'long' };
                birthdayDisplay = date.toLocaleDateString('fr-FR', options);
            }
            
            // Format size/shoe
            let sizeDisplay = [];
            if (member.size) sizeDisplay.push(`Taille ${member.size}`);
            if (member.shoe) sizeDisplay.push(`Pointure ${member.shoe}`);
            
            // Relation display
            const relationParts = [];
            if (member.relation) relationParts.push(member.relation);
            if (member.age) relationParts.push(`${member.age} ans`);
            
            // Social badges HTML
            let socialsHtml = '';
            if (member.email || member.facebook || member.instagram || member.twitter || member.linkedin || member.tiktok) {
                socialsHtml = '<div class="member-socials">';
                if (member.email) socialsHtml += `<a href="mailto:${member.email}" class="social-badge email" title="${member.email}">üìß</a>`;
                if (member.facebook) socialsHtml += `<a href="${formatSocialUrl('facebook', member.facebook)}" target="_blank" class="social-badge facebook" title="Facebook">üìò</a>`;
                if (member.instagram) socialsHtml += `<a href="${formatSocialUrl('instagram', member.instagram)}" target="_blank" class="social-badge instagram" title="Instagram">üì∏</a>`;
                if (member.twitter) socialsHtml += `<a href="${formatSocialUrl('twitter', member.twitter)}" target="_blank" class="social-badge twitter" title="Twitter">üê¶</a>`;
                if (member.linkedin) socialsHtml += `<a href="${formatSocialUrl('linkedin', member.linkedin)}" target="_blank" class="social-badge linkedin" title="LinkedIn">üíº</a>`;
                if (member.tiktok) socialsHtml += `<a href="${formatSocialUrl('tiktok', member.tiktok)}" target="_blank" class="social-badge tiktok" title="TikTok">üéµ</a>`;
                socialsHtml += '</div>';
            }

            // Invite status
            let inviteStatusHtml = '';
            if (member.email) {
                if (member.inviteStatus === 'accepted') {
                    inviteStatusHtml = '<div class="invite-status accepted">‚úÖ A rejoint AlerteRabais</div>';
                } else if (member.inviteStatus === 'pending') {
                    inviteStatusHtml = '<div class="invite-status pending">‚è≥ Invitation envoy√©e</div>';
                } else {
                    inviteStatusHtml = `<div class="invite-status not-invited"><button onclick="sendInvite('${member.id}')" style="background:none;border:none;color:var(--accent-cyan);cursor:pointer;font-size:0.8rem;">üì§ Envoyer une invitation</button></div>`;
                }
            }
            
            card.innerHTML = `
                <div class="member-header">
                    <div class="member-avatar ${member.group}">${member.avatar}</div>
                    <div class="member-info">
                        <div class="member-name">${member.name}</div>
                        <div class="member-relation">${relationParts.join(' ‚Ä¢ ') || 'Non sp√©cifi√©'}</div>
                    </div>
                    <button class="member-menu" onclick="toggleDropdown(event, '${member.id}')">‚ãÆ</button>
                    <div class="dropdown-menu" id="dropdown-${member.id}">
                        <div class="dropdown-item" onclick="editMember('${member.id}')">‚úèÔ∏è Modifier</div>
                        ${member.email ? `<div class="dropdown-item" onclick="sendInvite('${member.id}')">üìß Envoyer invitation</div>` : ''}
                        <div class="dropdown-item" onclick="shareMember('${member.id}')">üì§ Partager</div>
                        <div class="dropdown-item danger" onclick="confirmDelete('${member.id}')">üóëÔ∏è Supprimer</div>
                    </div>
                </div>
                ${inviteStatusHtml}
                <div class="member-details">
                    ${birthdayDisplay ? `<div class="member-detail"><span class="member-detail-icon">üéÇ</span><span>${birthdayDisplay}</span></div>` : ''}
                    ${sizeDisplay.length ? `<div class="member-detail"><span class="member-detail-icon">üëï</span><span>${sizeDisplay.join(' ‚Ä¢ ')}</span></div>` : ''}
                    ${!birthdayDisplay && !sizeDisplay.length ? `<div class="member-detail"><span class="member-detail-icon">‚ÑπÔ∏è</span><span>Aucun d√©tail ajout√©</span></div>` : ''}
                </div>
                ${socialsHtml}
                <div class="member-interests">
                    ${member.interests && member.interests.length ? member.interests.map(i => `<span class="interest-tag">${i}</span>`).join('') : '<span class="interest-tag">Aucun int√©r√™t</span>'}
                </div>
                <div class="member-actions">
                    <button class="member-action-btn primary" onclick="findGift('${member.id}')">üéÅ Trouver cadeau</button>
                    <button class="member-action-btn" onclick="editMember('${member.id}')">‚úèÔ∏è Modifier</button>
                </div>
            `;
            
            return card;
        }

        function formatSocialUrl(platform, value) {
            if (!value) return '#';
            value = value.trim();
            
            // Si c'est d√©j√† une URL compl√®te
            if (value.startsWith('http://') || value.startsWith('https://')) {
                return value;
            }
            
            // Retirer le @ au d√©but si pr√©sent
            if (value.startsWith('@')) {
                value = value.substring(1);
            }
            
            switch(platform) {
                case 'facebook':
                    if (value.includes('facebook.com')) return 'https://' + value;
                    return `https://facebook.com/${value}`;
                case 'instagram':
                    return `https://instagram.com/${value}`;
                case 'twitter':
                    return `https://twitter.com/${value}`;
                case 'linkedin':
                    if (value.includes('linkedin.com')) return 'https://' + value;
                    return `https://linkedin.com/in/${value}`;
                case 'tiktok':
                    return `https://tiktok.com/@${value}`;
                default:
                    return value;
            }
        }

        function updateCounts(members) {
            document.getElementById('count-all').textContent = members.length;
            document.getElementById('count-family').textContent = members.filter(m => m.group === 'family').length;
            document.getElementById('count-friend').textContent = members.filter(m => m.group === 'friend').length;
            document.getElementById('count-colleague').textContent = members.filter(m => m.group === 'colleague').length;
        }

        // ===== MODAL FUNCTIONS =====
        let currentEditId = null;

        function openModal(memberId = null) {
            const overlay = document.getElementById('modal-overlay');
            const form = document.getElementById('member-form');
            const title = document.getElementById('modal-title');
            const deleteBtn = document.getElementById('btn-delete');
            
            form.reset();
            resetAvatarSelection();
            resetInterests();
            
            if (memberId) {
                // Edit mode
                currentEditId = memberId;
                const members = loadMembers();
                const member = members.find(m => m.id === memberId);
                
                if (member) {
                    title.textContent = '‚úèÔ∏è Modifier ' + member.name;
                    deleteBtn.style.display = 'block';
                    
                    document.getElementById('member-id').value = member.id;
                    document.getElementById('member-name').value = member.name;
                    document.getElementById('member-relation').value = member.relation || '';
                    document.getElementById('member-group').value = member.group;
                    document.getElementById('member-age').value = member.age || '';
                    document.getElementById('member-birthday').value = member.birthday || '';
                    document.getElementById('member-size').value = member.size || '';
                    document.getElementById('member-shoe').value = member.shoe || '';
                    
                    // Social fields
                    document.getElementById('member-email').value = member.email || '';
                    document.getElementById('member-facebook').value = member.facebook || '';
                    document.getElementById('member-instagram').value = member.instagram || '';
                    document.getElementById('member-twitter').value = member.twitter || '';
                    document.getElementById('member-linkedin').value = member.linkedin || '';
                    document.getElementById('member-tiktok').value = member.tiktok || '';
                    
                    // Set avatar
                    selectAvatar(member.avatar);
                    
                    // Set interests
                    if (member.interests) {
                        member.interests.forEach(interest => {
                            const checkbox = document.querySelector(`.interest-checkbox[value="${interest}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                    }
                }
            } else {
                // Add mode
                currentEditId = null;
                title.textContent = 'üë§ Ajouter un membre';
                deleteBtn.style.display = 'none';
            }
            
            overlay.classList.add('active');
            document.getElementById('member-name').focus();
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
            currentEditId = null;
        }

        function closeModalOnOverlay(event) {
            if (event.target === event.currentTarget) {
                closeModal();
            }
        }

        function selectAvatar(avatar) {
            document.querySelectorAll('.avatar-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.dataset.avatar === avatar) {
                    opt.classList.add('selected');
                }
            });
        }

        function resetAvatarSelection() {
            document.querySelectorAll('.avatar-option').forEach((opt, index) => {
                opt.classList.toggle('selected', index === 0);
            });
        }

        function resetInterests() {
            document.querySelectorAll('.interest-checkbox').forEach(cb => {
                cb.checked = false;
            });
        }

        // Avatar selection handler
        document.getElementById('avatar-selector').addEventListener('click', (e) => {
            if (e.target.classList.contains('avatar-option')) {
                selectAvatar(e.target.dataset.avatar);
            }
        });

        // ===== CRUD OPERATIONS =====
        function saveMember() {
            const name = document.getElementById('member-name').value.trim();
            const group = document.getElementById('member-group').value;
            
            if (!name) {
                showToast('‚ùå Le nom est obligatoire', true);
                return;
            }
            
            const selectedAvatar = document.querySelector('.avatar-option.selected');
            const interests = Array.from(document.querySelectorAll('.interest-checkbox:checked')).map(cb => cb.value);
            const sendInviteChecked = document.getElementById('send-invite').checked;
            const email = document.getElementById('member-email').value.trim();
            
            const memberData = {
                id: currentEditId || 'member_' + Date.now(),
                name: name,
                avatar: selectedAvatar ? selectedAvatar.dataset.avatar : 'üë§',
                relation: document.getElementById('member-relation').value.trim(),
                group: group,
                age: document.getElementById('member-age').value || null,
                birthday: document.getElementById('member-birthday').value || null,
                size: document.getElementById('member-size').value || null,
                shoe: document.getElementById('member-shoe').value || null,
                email: email || null,
                facebook: document.getElementById('member-facebook').value.trim() || null,
                instagram: document.getElementById('member-instagram').value.trim() || null,
                twitter: document.getElementById('member-twitter').value.trim() || null,
                linkedin: document.getElementById('member-linkedin').value.trim() || null,
                tiktok: document.getElementById('member-tiktok').value.trim() || null,
                interests: interests,
                inviteStatus: null,
                createdAt: currentEditId ? undefined : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            const members = loadMembers();
            
            if (currentEditId) {
                // Update existing
                const index = members.findIndex(m => m.id === currentEditId);
                if (index !== -1) {
                    memberData.createdAt = members[index].createdAt;
                    memberData.inviteStatus = members[index].inviteStatus;
                    members[index] = memberData;
                }
                showToast('‚úÖ ' + name + ' modifi√© avec succ√®s!');
            } else {
                // Add new
                members.push(memberData);
                showToast('‚úÖ ' + name + ' ajout√© √† votre tribu!');
                
                // Send invite if checkbox is checked and email is provided
                if (sendInviteChecked && email) {
                    setTimeout(() => {
                        sendInviteToMember(memberData);
                    }, 500);
                }
            }
            
            saveMembers(members);
            closeModal();
            renderMembers(getActiveGroup());
        }

        function editMember(id) {
            closeAllDropdowns();
            openModal(id);
        }

        function confirmDelete(id) {
            closeAllDropdowns();
            const members = loadMembers();
            const member = members.find(m => m.id === id);
            
            if (member && confirm(`√ätes-vous s√ªr de vouloir supprimer "${member.name}" de votre tribu?`)) {
                deleteMemberById(id);
            }
        }

        function deleteMember() {
            if (currentEditId) {
                const members = loadMembers();
                const member = members.find(m => m.id === currentEditId);
                
                if (member && confirm(`√ätes-vous s√ªr de vouloir supprimer "${member.name}" de votre tribu?`)) {
                    deleteMemberById(currentEditId);
                    closeModal();
                }
            }
        }

        function deleteMemberById(id) {
            let members = loadMembers();
            const member = members.find(m => m.id === id);
            members = members.filter(m => m.id !== id);
            saveMembers(members);
            renderMembers(getActiveGroup());
            showToast('üóëÔ∏è ' + (member ? member.name : 'Membre') + ' supprim√©');
        }

        // ===== INVITE & SHARE FUNCTIONS =====
        async function sendInvite(memberId) {
            closeAllDropdowns();
            const members = loadMembers();
            const member = members.find(m => m.id === memberId);
            
            if (!member) return;
            
            if (!member.email) {
                showToast('‚ùå Aucun email pour ce membre', true);
                return;
            }
            
            await sendInviteToMember(member);
        }

        async function sendInviteToMember(member) {
            showToast('üì§ Envoi de l\'invitation...');
            
            try {
                // Appel au backend pour envoyer l'email
                const response = await fetch(`${CONFIG.BACKEND_URL}/api/invite`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        to_email: member.email,
                        to_name: member.name,
                        from_name: 'Un ami', // TODO: Get from logged in user
                        invite_type: 'tribu',
                        message: `Tu as √©t√© ajout√©(e) √† ma tribu sur ${CONFIG.SITE_NAME}! Rejoins-moi pour d√©couvrir les meilleurs rabais.`
                    })
                });
                
                if (response.ok) {
                    // Update member invite status
                    const members = loadMembers();
                    const index = members.findIndex(m => m.id === member.id);
                    if (index !== -1) {
                        members[index].inviteStatus = 'pending';
                        saveMembers(members);
                        renderMembers(getActiveGroup());
                    }
                    showToast(`‚úÖ Invitation envoy√©e √† ${member.name}!`);
                } else {
                    throw new Error('Erreur serveur');
                }
            } catch (error) {
                console.error('Erreur envoi invitation:', error);
                // Fallback: ouvrir client email
                const subject = encodeURIComponent(`Je t'ai ajout√©(e) √† ma tribu sur ${CONFIG.SITE_NAME}!`);
                const body = encodeURIComponent(
                    `Salut ${member.name}!\n\n` +
                    `Je t'ai ajout√©(e) √† ma tribu sur ${CONFIG.SITE_NAME}, une app g√©niale qui utilise l'IA pour trouver les meilleurs cadeaux et rabais.\n\n` +
                    `Rejoins-moi ici: ${CONFIG.SITE_URL}/signup.html?ref=tribu&invited_by=${encodeURIComponent(member.name)}\n\n` +
                    `√Ä bient√¥t!`
                );
                window.open(`mailto:${member.email}?subject=${subject}&body=${body}`);
                
                // Still mark as pending
                const members = loadMembers();
                const index = members.findIndex(m => m.id === member.id);
                if (index !== -1) {
                    members[index].inviteStatus = 'pending';
                    saveMembers(members);
                    renderMembers(getActiveGroup());
                }
                showToast(`üìß Client email ouvert pour ${member.name}`);
            }
        }

        function shareMember(memberId) {
            closeAllDropdowns();
            const members = loadMembers();
            const member = members.find(m => m.id === memberId);
            
            if (!member) return;
            
            const shareText = `J'ai ajout√© ${member.name} √† ma tribu sur ${CONFIG.SITE_NAME}! üéÅ Rejoins-nous: ${CONFIG.SITE_URL}`;
            
            if (navigator.share) {
                navigator.share({
                    title: `Ma Tribu - ${CONFIG.SITE_NAME}`,
                    text: shareText,
                    url: CONFIG.SITE_URL
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showToast('üìã Lien copi√©!');
                });
            }
        }

        // ===== SOCIAL SHARING =====
        function shareOnFacebook() {
            const url = encodeURIComponent(CONFIG.SITE_URL);
            const text = encodeURIComponent(`Je d√©couvre ${CONFIG.SITE_NAME}, une app g√©niale qui utilise l'IA pour trouver les meilleurs cadeaux et rabais! üéÅ`);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank', 'width=600,height=400');
        }

        function shareOnTwitter() {
            const url = encodeURIComponent(CONFIG.SITE_URL);
            const text = encodeURIComponent(`Je d√©couvre ${CONFIG.SITE_NAME}, une app IA pour trouver les meilleurs cadeaux! üéÅ`);
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank', 'width=600,height=400');
        }

        function copyInviteLink() {
            const link = `${CONFIG.SITE_URL}/signup.html?ref=tribu`;
            navigator.clipboard.writeText(link).then(() => {
                showToast('üìã Lien copi√© dans le presse-papiers!');
            });
        }

        function inviteByEmail() {
            const subject = encodeURIComponent(`Rejoins ma tribu sur ${CONFIG.SITE_NAME}!`);
            const body = encodeURIComponent(
                `Salut!\n\n` +
                `Je t'invite √† rejoindre ${CONFIG.SITE_NAME}, une app g√©niale qui utilise l'IA pour trouver les meilleurs cadeaux et rabais.\n\n` +
                `Inscris-toi ici: ${CONFIG.SITE_URL}/signup.html?ref=tribu\n\n` +
                `√Ä bient√¥t!`
            );
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        // ===== DROPDOWN MENU =====
        function toggleDropdown(event, id) {
            event.stopPropagation();
            closeAllDropdowns();
            const dropdown = document.getElementById('dropdown-' + id);
            if (dropdown) {
                dropdown.classList.toggle('active');
                
                // Position dropdown
                const button = event.target;
                const rect = button.getBoundingClientRect();
                dropdown.style.top = (rect.bottom + 5) + 'px';
                dropdown.style.right = (window.innerWidth - rect.right) + 'px';
            }
        }

        function closeAllDropdowns() {
            document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('active'));
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', closeAllDropdowns);

        // ===== FILTER TABS =====
        function getActiveGroup() {
            const activeTab = document.querySelector('.group-tab.active');
            return activeTab ? activeTab.dataset.group : 'all';
        }

        document.querySelectorAll('.group-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.group-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                renderMembers(tab.dataset.group);
            });
        });

        // ===== ACTIONS =====
        function findGift(memberId) {
            const members = loadMembers();
            const member = members.find(m => m.id === memberId);
            
            if (member) {
                // Build search query from member info
                let query = `Cadeau pour ${member.name}`;
                if (member.age) query += ` ${member.age} ans`;
                if (member.relation) query += ` (${member.relation})`;
                if (member.interests && member.interests.length) {
                    query += ` qui aime: ${member.interests.join(', ')}`;
                }
                
                window.location.href = `index.html?q=${encodeURIComponent(query)}&for=${encodeURIComponent(member.name)}`;
            }
        }

        // ===== TOAST NOTIFICATION =====
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toast-icon');
            const msg = document.getElementById('toast-message');
            
            icon.textContent = isError ? '‚ùå' : '‚úÖ';
            msg.textContent = message;
            toast.classList.toggle('error', isError);
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
                closeAllDropdowns();
            }
        });

        // ===== INIT =====
        document.addEventListener('DOMContentLoaded', () => {
            renderMembers();
        });
    </script>
</body>
</html>
